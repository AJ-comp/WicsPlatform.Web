@attribute [Authorize]

<RadzenStack Gap="1rem" class="speaker-group-dialog">
    <!-- 헤더 섹션 -->
    <RadzenCard class="dialog-header-card">
        <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="1rem">
            <div class="header-icon-wrapper">
                <RadzenIcon Icon="group_add" class="header-icon" />
            </div>
            <RadzenStack Gap="0.25rem">
                <RadzenText TextStyle="TextStyle.H6" class="header-title">새 스피커 그룹 생성</RadzenText>
                <RadzenText TextStyle="TextStyle.Caption" class="header-subtitle">
                    스피커를 체계적으로 관리하기 위한 그룹을 생성합니다
                </RadzenText>
            </RadzenStack>
        </RadzenStack>
    </RadzenCard>

    <!-- 폼 섹션 -->
    <RadzenTemplateForm TItem="SpeakerGroupFormModel" Data="@model" Submit="@FormSubmit">
        <RadzenStack Gap="1.25rem">
            <!-- 에러 알림 -->
            @if (errorVisible)
            {
                <RadzenAlert AlertStyle="AlertStyle.Danger" 
                             Variant="Variant.Flat" 
                             Shade="Shade.Lighter"
                             AllowClose="false">
                    <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="0.5rem">
                        <RadzenIcon Icon="error_outline" />
                        <RadzenText>@error</RadzenText>
                    </RadzenStack>
                </RadzenAlert>
            }

            <!-- 그룹명 필드 -->
            <RadzenFormField Text="그룹명" Variant="Variant.Outlined">
                <ChildContent>
                    <RadzenTextBox @bind-Value="@model.GroupName" 
                                   Name="GroupName"
                                   Placeholder="예: 1층 로비 스피커 그룹"
                                   class="w-100" />
                </ChildContent>
                <Helper>
                    <RadzenText TextStyle="TextStyle.Caption" class="field-helper">
                        그룹을 식별할 수 있는 명확한 이름을 입력하세요
                    </RadzenText>
                </Helper>
            </RadzenFormField>
            <RadzenRequiredValidator Component="GroupName" 
                                     Text="그룹명은 필수 입력 항목입니다" />

            <!-- 설명 필드 -->
            <RadzenFormField Text="설명 (선택)" Variant="Variant.Outlined">
                <ChildContent>
                    <RadzenTextArea @bind-Value="@model.Description" 
                                    Name="Description"
                                    Rows="4"
                                    Placeholder="이 그룹의 용도나 특징을 간단히 설명해주세요"
                                    class="w-100" />
                </ChildContent>
                <Helper>
                    <RadzenText TextStyle="TextStyle.Caption" class="field-helper">
                        그룹의 목적이나 관리 정보를 입력할 수 있습니다
                    </RadzenText>
                </Helper>
            </RadzenFormField>

            <!-- 추가 정보 섹션 -->
            <RadzenCard class="info-card" Variant="Variant.Outlined">
                <RadzenStack Orientation="Orientation.Horizontal" Gap="0.75rem" AlignItems="AlignItems.Start">
                    <RadzenIcon Icon="info" class="info-icon" />
                    <RadzenStack Gap="0.5rem">
                        <RadzenText TextStyle="TextStyle.Subtitle2" class="info-title">그룹 생성 안내</RadzenText>
                        <RadzenStack Gap="0.25rem">
                            <RadzenText TextStyle="TextStyle.Caption">• 생성된 그룹에 스피커를 추가하여 일괄 제어가 가능합니다</RadzenText>
                            <RadzenText TextStyle="TextStyle.Caption">• 그룹별로 볼륨, 방송 설정을 개별 관리할 수 있습니다</RadzenText>
                            <RadzenText TextStyle="TextStyle.Caption">• 그룹 정보는 생성 후에도 수정 가능합니다</RadzenText>
                        </RadzenStack>
                    </RadzenStack>
                </RadzenStack>
            </RadzenCard>

            <!-- 액션 버튼 섹션 -->
            <RadzenStack Orientation="Orientation.Horizontal" 
                         JustifyContent="JustifyContent.End" 
                         Gap="0.75rem"
                         class="dialog-actions">
                <RadzenButton ButtonStyle="ButtonStyle.Light"
                              Text="취소"
                              Icon="close"
                              Click="@CancelClick"
                              Variant="Variant.Outlined"
                              Disabled="@isProcessing" />
                @if (isProcessing)
                {
                    <RadzenButton ButtonType="ButtonType.Submit"
                                  ButtonStyle="ButtonStyle.Primary"
                                  Text="생성 중..."
                                  Icon="sync"
                                  IsBusy="true"
                                  Disabled="true" />
                }
                else
                {
                    <RadzenButton ButtonType="ButtonType.Submit"
                                  ButtonStyle="ButtonStyle.Primary"
                                  Icon="check_circle"
                                  Text="그룹 생성" />
                }
            </RadzenStack>
        </RadzenStack>
    </RadzenTemplateForm>
</RadzenStack>

<style>
    /* 메인 컨테이너 */
    .speaker-group-dialog {
        padding: 0;
        width: 100%;
        max-width: 600px;
    }

    /* 헤더 카드 */
    .dialog-header-card {
        background: var(--rz-primary) !important;
        color: white !important;
        border: none !important;
    }

    .header-icon-wrapper {
        width: 3rem;
        height: 3rem;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 0.75rem;
        backdrop-filter: blur(10px);
    }

    .header-icon {
        font-size: 1.75rem !important;
        color: white !important;
    }

    .dialog-header-card .header-title {
        color: white !important;
        margin: 0 !important;
        font-weight: 600 !important;
    }

    .dialog-header-card .header-subtitle {
        color: rgba(255, 255, 255, 0.9) !important;
        opacity: 0.95;
    }

    /* 필드 헬퍼 텍스트 */
    .field-helper {
        color: var(--rz-text-secondary-color);
        opacity: 0.8;
    }

    /* 정보 카드 */
    .info-card {
        background-color: var(--rz-base-background-color) !important;
        border-color: var(--rz-border-color) !important;
    }

    .info-icon {
        color: var(--rz-info) !important;
        font-size: 1.25rem !important;
        margin-top: 0.125rem;
    }

    .info-title {
        color: var(--rz-text-color) !important;
        font-weight: 600 !important;
        margin: 0 !important;
    }

    .info-card .rz-text {
        color: var(--rz-text-secondary-color) !important;
        line-height: 1.6 !important;
    }

    /* 액션 버튼 영역 */
    .dialog-actions {
        padding-top: 1rem;
        border-top: 1px solid var(--rz-border-color);
    }

    /* 전체 너비 클래스 */
    .w-100 {
        width: 100%;
    }

    /* 부드러운 페이드인 애니메이션 */
    @@keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .speaker-group-dialog {
        animation: fadeInUp 0.3s ease-out;
    }

    /* Radzen 컴포넌트 오버라이드 */
    .speaker-group-dialog .rz-button {
        font-weight: 500;
    }

    /* FormField 스타일 개선 */
    .speaker-group-dialog .rz-form-field {
        margin-bottom: 0;
    }

    .speaker-group-dialog .rz-textbox,
    .speaker-group-dialog .rz-textarea {
        font-size: 0.9rem;
    }
</style>