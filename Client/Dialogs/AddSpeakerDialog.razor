@attribute [Authorize]

<div class="speaker-dialog">
    <!-- 헤더 섹션 -->
    <div class="dialog-header">
        <div class="header-content">
            <div class="header-icon-badge">
                <RadzenIcon Icon="router" />
            </div>
            <div class="header-text">
                <h2 class="header-title">SPEAKER REGISTRATION</h2>
                <p class="header-subtitle">네트워크 스피커 장치 등록</p>
            </div>
        </div>
    </div>

    <div class="dialog-body">

    <!-- 폼 섹션 -->
    <RadzenTemplateForm TItem="SpeakerFormModel" Data="@model" Submit="@FormSubmit">
        <RadzenStack Gap="1.25rem">
            <!-- 에러 알림 -->
            @if (errorVisible)
            {
                <RadzenAlert AlertStyle="AlertStyle.Danger" 
                             Variant="Variant.Flat" 
                             Shade="Shade.Lighter"
                             AllowClose="false">
                    <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="0.5rem">
                        <RadzenIcon Icon="error_outline" />
                        <RadzenText>@error</RadzenText>
                    </RadzenStack>
                </RadzenAlert>
            }

            <!-- 폼 그리드 -->
            <div class="form-grid">
                <!-- 좌측 컬럼 -->
                <div class="form-column">
                    <!-- 기본 정보 -->
                    <div class="field-group">
                        <div class="field-group-header">
                            <RadzenIcon Icon="info" class="field-group-icon" />
                            <span class="field-group-title">BASIC INFORMATION</span>
                        </div>
                        
                        <RadzenFormField Text="스피커명" Variant="Variant.Outlined" class="form-field">
                            <ChildContent>
                                <RadzenTextBox @bind-Value="@model.Name" 
                                               Name="Name"
                                               Placeholder="1층 로비 스피커 #1"
                                               class="w-100" />
                            </ChildContent>
                        </RadzenFormField>
                        <RadzenRequiredValidator Component="Name" 
                                                 Text="스피커명은 필수 입력 항목입니다" />

                        <RadzenFormField Text="IP 주소" Variant="Variant.Outlined" class="form-field">
                            <ChildContent>
                                <RadzenTextBox @bind-Value="@model.Ip" 
                                               Name="Ip"
                                               Placeholder="192.168.0.100"
                                               class="w-100" />
                            </ChildContent>
                        </RadzenFormField>
                        <RadzenRequiredValidator Component="Ip" 
                                                 Text="IP 주소는 필수 입력 항목입니다" />
                        <RadzenRegexValidator Component="Ip"
                                              Text="올바른 IP 주소 형식이 아닙니다"
                                              Pattern="^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$" />
                    </div>

                    <!-- 위치 정보 -->
                    <div class="field-group">
                        <div class="field-group-header">
                            <RadzenIcon Icon="place" class="field-group-icon" />
                            <span class="field-group-title">LOCATION</span>
                        </div>
                        
                        <RadzenFormField Text="설치 위치" Variant="Variant.Outlined" class="form-field">
                            <ChildContent>
                                <RadzenTextBox @bind-Value="@model.Location" 
                                               Name="Location"
                                               Placeholder="본관 1층 로비 입구"
                                               class="w-100" />
                            </ChildContent>
                        </RadzenFormField>
                        <RadzenRequiredValidator Component="Location" 
                                                 Text="설치 위치는 필수 입력 항목입니다" />

                        <RadzenFormField Text="채널 할당" Variant="Variant.Outlined" class="form-field">
                            <ChildContent>
                                <RadzenDropDown @bind-Value="@model.ChannelId"
                                                Data="@channels"
                                                TextProperty="Name"
                                                ValueProperty="Id"
                                                AllowClear="true"
                                                AllowFiltering="true"
                                                FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive"
                                                Placeholder="선택사항"
                                                Name="ChannelId"
                                                class="w-100" />
                            </ChildContent>
                        </RadzenFormField>
                    </div>
                </div>

                <!-- 우측 컬럼 -->
                <div class="form-column">
                    <!-- 장치 정보 -->
                    <div class="field-group">
                        <div class="field-group-header">
                            <RadzenIcon Icon="devices" class="field-group-icon" />
                            <span class="field-group-title">DEVICE SPECIFICATION</span>
                        </div>
                        
                        <RadzenFormField Text="모델명" Variant="Variant.Outlined" class="form-field">
                            <ChildContent>
                                <RadzenTextBox @bind-Value="@model.Model" 
                                               Name="Model"
                                               Placeholder="WICS-SP1000"
                                               class="w-100" />
                            </ChildContent>
                        </RadzenFormField>
                        <RadzenRequiredValidator Component="Model" 
                                                 Text="모델명은 필수 입력 항목입니다" />

                        <RadzenFormField Text="접속 비밀번호" Variant="Variant.Outlined" class="form-field">
                            <ChildContent>
                                <RadzenPassword @bind-Value="@model.Password" 
                                                Name="Password"
                                                Placeholder="••••••••"
                                                class="w-100" />
                            </ChildContent>
                        </RadzenFormField>
                        <RadzenRequiredValidator Component="Password" 
                                                 Text="비밀번호는 필수 입력 항목입니다" />
                    </div>
                </div>
            </div>

            <!-- 안내 정보 -->
            <div class="info-notice">
                <div class="notice-header">
                    <RadzenIcon Icon="info" class="notice-icon" />
                    <span class="notice-title">REGISTRATION NOTICE</span>
                </div>
                <ul class="notice-list">
                    <li>네트워크 연결 확인 필수</li>
                    <li>IP 주소 중복 불가 (고정 IP 권장)</li>
                    <li>채널 할당 추후 변경 가능</li>
                    <li>등록 후 연결 테스트 권장</li>
                </ul>
            </div>
        </RadzenStack>
    </RadzenTemplateForm>

    <!-- 액션 버튼 -->
    <div class="dialog-footer">
        <div class="footer-hint">
            <RadzenIcon Icon="check_circle" />
            <span>필수 항목을 모두 입력해주세요</span>
        </div>
        <div class="footer-actions">
            <RadzenButton ButtonStyle="ButtonStyle.Light"
                          Text="취소"
                          Click="@CancelClick"
                          Variant="Variant.Outlined"
                          Disabled="@isProcessing"
                          class="btn-cancel" />
            @if (isProcessing)
            {
                <RadzenButton ButtonType="ButtonType.Submit"
                              ButtonStyle="ButtonStyle.Primary"
                              Text="등록 중..."
                              Icon="sync"
                              IsBusy="true"
                              Disabled="true"
                              class="btn-submit" />
            }
            else
            {
                <RadzenButton ButtonType="ButtonType.Submit"
                              ButtonStyle="ButtonStyle.Primary"
                              Icon="add_circle_outline"
                              Text="등록"
                              class="btn-submit" />
            }
        </div>
    </div>
    
    </div>
</div>

<style>
    /* ========================================
       메인 컨테이너
       ======================================== */
    .speaker-dialog {
        width: 100%;
        max-width: 780px;
        font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        background: var(--rz-base-background-color);
        border-radius: 4px;
        overflow: hidden;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
    }

    /* ========================================
       헤더
       ======================================== */
    .dialog-header {
        background: linear-gradient(135deg, #1a237e 0%, #283593 100%);
        padding: 1.5rem 2rem;
        border-bottom: 3px solid rgba(255, 255, 255, 0.1);
        position: relative;
        overflow: hidden;
    }

    .dialog-header::before {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        width: 200px;
        height: 200px;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.08) 0%, transparent 70%);
        pointer-events: none;
    }

    .header-content {
        display: flex;
        align-items: center;
        gap: 1.25rem;
        position: relative;
        z-index: 1;
    }

    .header-icon-badge {
        width: 48px;
        height: 48px;
        background: rgba(255, 255, 255, 0.15);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .header-icon-badge .rz-icon {
        font-size: 24px !important;
        color: white !important;
    }

    .header-text {
        flex: 1;
    }

    .header-title {
        margin: 0;
        font-size: 1.1rem;
        font-weight: 600;
        color: white;
        letter-spacing: 0.15em;
        text-transform: uppercase;
        line-height: 1.2;
    }

    .header-subtitle {
        margin: 0.35rem 0 0 0;
        font-size: 0.8rem;
        color: rgba(255, 255, 255, 0.85);
        font-weight: 400;
        letter-spacing: -0.01em;
    }

    /* ========================================
       다이얼로그 바디
       ======================================== */
    .dialog-body {
        padding: 2rem;
        background: var(--rz-base-background-color);
    }

    /* ========================================
       폼 그리드
       ======================================== */
    .form-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 2rem;
        margin-bottom: 1.5rem;
    }

    .form-column {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
    }

    /* ========================================
       필드 그룹
       ======================================== */
    .field-group {
        background: var(--rz-base-background-color);
        border: 2px solid var(--rz-border-color);
        border-radius: 6px;
        padding: 1.25rem;
        transition: all 0.2s ease;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
    }

    .field-group:hover {
        border-color: var(--rz-primary);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        transform: translateY(-1px);
    }

    .field-group-header {
        display: flex;
        align-items: center;
        gap: 0.65rem;
        margin-bottom: 1rem;
        padding-bottom: 0.75rem;
        border-bottom: 2px solid var(--rz-border-color);
    }

    .field-group-icon {
        font-size: 16px !important;
        color: var(--rz-primary) !important;
        opacity: 0.8;
    }

    .field-group-title {
        font-size: 0.7rem;
        font-weight: 600;
        color: var(--rz-text-secondary-color);
        letter-spacing: 0.12em;
        text-transform: uppercase;
    }

    /* ========================================
       폼 필드
       ======================================== */
    .form-field {
        margin-bottom: 1rem;
    }

    .form-field:last-child {
        margin-bottom: 0;
    }

    .speaker-dialog .rz-form-field label {
        font-size: 0.75rem !important;
        font-weight: 500 !important;
        color: var(--rz-text-color) !important;
        margin-bottom: 0.4rem !important;
        text-transform: uppercase;
        letter-spacing: 0.03em;
    }

    .speaker-dialog .rz-textbox,
    .speaker-dialog .rz-password input,
    .speaker-dialog .rz-dropdown {
        font-size: 0.85rem !important;
        padding: 0.65rem 0.85rem !important;
        border-radius: 3px !important;
        border: 1px solid var(--rz-border-color) !important;
        background: var(--rz-base-background-color) !important;
        transition: all 0.2s ease !important;
    }

    .speaker-dialog .rz-textbox:focus,
    .speaker-dialog .rz-password input:focus,
    .speaker-dialog .rz-dropdown:focus {
        border-color: var(--rz-primary) !important;
        box-shadow: 0 0 0 3px rgba(26, 35, 126, 0.1) !important;
        outline: none !important;
    }

    /* ========================================
       안내 정보
       ======================================== */
    .info-notice {
        background: var(--rz-base-background-color);
        border: 1px solid var(--rz-border-color);
        border-left: 4px solid var(--rz-info);
        border-radius: 3px;
        padding: 1.25rem;
        margin-top: 0.5rem;
    }

    .notice-header {
        display: flex;
        align-items: center;
        gap: 0.65rem;
        margin-bottom: 0.85rem;
    }

    .notice-icon {
        font-size: 16px !important;
        color: var(--rz-info) !important;
    }

    .notice-title {
        font-size: 0.7rem;
        font-weight: 600;
        color: var(--rz-text-secondary-color);
        letter-spacing: 0.12em;
        text-transform: uppercase;
    }

    .notice-list {
        margin: 0;
        padding-left: 1.5rem;
        list-style: none;
    }

    .notice-list li {
        font-size: 0.75rem;
        color: var(--rz-text-secondary-color);
        line-height: 1.8;
        position: relative;
        padding-left: 0.5rem;
    }

    .notice-list li::before {
        content: '•';
        position: absolute;
        left: -0.75rem;
        color: var(--rz-info);
        font-weight: bold;
    }

    /* ========================================
       다이얼로그 푸터
       ======================================== */
    .dialog-footer {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1.25rem 2rem;
        background: var(--rz-base-background-color);
        border-top: 2px solid var(--rz-border-color);
    }

    .footer-hint {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.75rem;
        color: var(--rz-text-secondary-color);
    }

    .footer-hint .rz-icon {
        font-size: 16px !important;
        color: var(--rz-success) !important;
    }

    .footer-actions {
        display: flex;
        gap: 0.75rem;
    }

    /* ========================================
       버튼
       ======================================== */
    .btn-cancel,
    .btn-submit {
        font-size: 0.8rem !important;
        font-weight: 500 !important;
        padding: 0.6rem 1.5rem !important;
        border-radius: 3px !important;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        transition: all 0.2s ease !important;
    }

    .btn-cancel {
        border: 1px solid var(--rz-border-color) !important;
        background: var(--rz-base-background-color) !important;
        color: var(--rz-text-secondary-color) !important;
    }

    .btn-cancel:hover:not(:disabled) {
        border-color: var(--rz-text-secondary-color) !important;
        background: var(--rz-base-100) !important;
    }

    .btn-submit {
        background: linear-gradient(135deg, #1a237e 0%, #283593 100%) !important;
        border: none !important;
        color: white !important;
        box-shadow: 0 2px 8px rgba(26, 35, 126, 0.3) !important;
    }

    .btn-submit:hover:not(:disabled) {
        box-shadow: 0 4px 12px rgba(26, 35, 126, 0.4) !important;
        transform: translateY(-1px);
    }

    /* ========================================
       유틸리티
       ======================================== */
    .w-100 {
        width: 100%;
    }

    /* Validator 스타일 */
    .speaker-dialog .rz-message {
        font-size: 0.7rem !important;
        margin-top: 0.35rem !important;
    }

    /* Alert 스타일 */
    .speaker-dialog .rz-alert {
        border-radius: 3px !important;
        margin-bottom: 1.5rem !important;
    }

    .speaker-dialog .rz-alert .rz-text {
        font-size: 0.8rem !important;
    }

    /* ========================================
       반응형
       ======================================== */
    @@media (max-width: 768px) {
        .form-grid {
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }

        .dialog-body {
            padding: 1.5rem;
        }

        .dialog-header {
            padding: 1.25rem 1.5rem;
        }

        .dialog-footer {
            padding: 1rem 1.5rem;
            flex-direction: column;
            gap: 1rem;
        }

        .footer-actions {
            width: 100%;
            justify-content: stretch;
        }

        .btn-cancel,
        .btn-submit {
            flex: 1;
        }
    }

    /* ========================================
       애니메이션
       ======================================== */
    @@keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .speaker-dialog {
        animation: slideDown 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
</style>