@inherits LayoutComponentBase
@inject CookieThemeService CookieThemeService
<RadzenComponents />

<ThemeLinkInjector />

<ThemeHead />

<RadzenLayout style="grid-template-areas: 'rz-header' 'rz-body'; grid-template-columns: 1fr;">
    <RadzenHeader>
        <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" JustifyContent="JustifyContent.SpaceBetween" Gap="1rem" class="rz-px-4" Style="height: 100%;">
            <!-- 로고 및 메뉴 영역 (왼쪽) -->
            <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="2rem">
                <!-- 로고 -->
                <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="0.5rem">
                    <RadzenImage Path="images/logo.png" style="width: 32px; height: 32px;" AlternateText="WicsPlatform logo"></RadzenImage>
                    <RadzenText Text="WicsPlatform" TextStyle="Radzen.Blazor.TextStyle.Subtitle1" class="rz-mb-0 brand-title" Style="font-weight: 600;" />
                </RadzenStack>
                
                <!-- 메뉴 -->
                <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="0.5rem" class="top-menu">
                    <NavLink href="" class="top-menu-item" Match="NavLinkMatch.All">
                        <RadzenIcon Icon="home" />
                        <span>홈</span>
                    </NavLink>
                    <NavLink href="manage-broad-cast" class="top-menu-item">
                        <RadzenIcon Icon="settings_input_antenna" />
                        <span>방송 관리</span>
                    </NavLink>
                </RadzenStack>
            </RadzenStack>

            <!-- 우측 메뉴 -->
            <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" JustifyContent="JustifyContent.End" Gap="0.5rem">
                <AppearanceToggleCurrent />
                <RadzenProfileMenu style="@(Security.IsAuthenticated() ? "" : "visibility: hidden;")" Click="@ProfileMenuClick">
                    <ChildContent>
                        <RadzenProfileMenuItem Path="profile" Icon="settings" Text="Profile" />
                        <RadzenProfileMenuItem Path="application-users" Icon="person" Text="Users" />
                        <RadzenProfileMenuItem Path="application-roles" Icon="security" Text="Roles" />
                        <RadzenProfileMenuItem Text="Logout" Value="Logout" Icon="power_settings_new" />
                    </ChildContent>
                    <Template>
                        @Security.User?.Name
                        <RadzenGravatar Email="@Security.User?.Name" />
                    </Template>
                </RadzenProfileMenu>
            </RadzenStack>
        </RadzenStack>
    </RadzenHeader>
    <RadzenBody>
        <div class="rz-px-4 rz-pt-2 rz-pt-md-4 rz-pb-2 rz-pb-lg-12">
            @Body
        </div>
    </RadzenBody>
</RadzenLayout>

<style>
    /* 상단 메뉴 스타일 */
    .top-menu-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        border-radius: var(--rz-border-radius);
        text-decoration: none;
        /* Always white on header bar */
        color: #fff !important;
        transition: all 0.2s ease;
        font-size: 0.9rem;
        font-weight: 500;
    }

    .top-menu-item .rz-icon { color: #fff !important; }

    .top-menu-item:hover {
        background-color: rgba(255, 255, 255, 0.10) !important;
        color: #fff !important;
    }

    .top-menu-item.active {
        background-color: rgba(255, 255, 255, 0.15) !important;
        color: #fff !important;
        font-weight: 600;
    }

    .top-menu-item .rz-icon {
        font-size: 1.25rem;
    }

    /* 헤더 높이 조정 */
    .rz-header {
        height: 60px;
        border-bottom: 1px solid var(--rz-border-color);
    }

    /* Body 영역 전체 너비 사용 */
    .rz-body {
        width: 100%;
        max-width: 100%;
    }

    /* 브랜드 타이틀은 항상 흰색 */
    .brand-title{ color:#fff !important; }

    /* 반응형 대응 */
    @@media (max-width: 768px) {
        .top-menu-item span {
            display: none;
        }

        .top-menu {
            gap: 0.25rem !important;
        }
    }
</style>